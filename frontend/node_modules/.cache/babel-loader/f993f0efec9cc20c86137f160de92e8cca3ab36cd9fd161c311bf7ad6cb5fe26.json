{"ast":null,"code":"import axios from 'axios';\n/* ================================\r\n   BASE CONFIG\r\n================================ */\n\nconst API_BASE_URL = 'http://127.0.0.1:8080';\n\n/**\r\n * Axios instance for JSON-based APIs\r\n */\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n/* ================================\r\n   JWT INTERCEPTOR\r\n================================ */\n\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n/* ================================\r\n   AUTH API\r\n================================ */\n\nexport const authAPI = {\n  /**\r\n   * Register user (JSON)\r\n   */\n  register: async (name, email, password, role = 'user') => {\n    const response = await api.post('/api/auth/register', {\n      name,\n      email,\n      password,\n      role\n    });\n    return response.data;\n  },\n  /**\r\n   * Login user (OAuth2 form-data)\r\n   * IMPORTANT: FastAPI expects `username`, not `email`\r\n   */\n  login: async (email, password) => {\n    const formData = new URLSearchParams();\n    formData.append('username', email);\n    formData.append('password', password);\n    const response = await axios.post(`${API_BASE_URL}/api/auth/login`, formData, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    });\n    return response.data;\n  }\n};\n\n/* ================================\r\n   ADMIN API\r\n================================ */\n\nexport const adminAPI = {\n  getTasks: async () => {\n    const response = await api.get('/api/admin/tasks');\n    return response.data;\n  },\n  createTask: async taskData => {\n    const response = await api.post('/api/admin/tasks', taskData);\n    return response.data;\n  },\n  updateTask: async (taskId, taskData) => {\n    const response = await api.put(`/api/admin/tasks/${taskId}`, taskData);\n    return response.data;\n  },\n  deleteTask: async taskId => {\n    await api.delete(`/api/admin/tasks/${taskId}`);\n  },\n  getAnalytics: async () => {\n    const response = await api.get('/api/admin/analytics');\n    return response.data;\n  },\n  getUsers: async () => {\n    const response = await api.get('/api/admin/users');\n    return response.data;\n  }\n};\n\n/* ================================\r\n   USER API\r\n================================ */\n\nexport const userAPI = {\n  getTasks: async () => {\n    const response = await api.get('/api/user/tasks');\n    return response.data;\n  },\n  updateTask: async (taskId, taskData) => {\n    const response = await api.put(`/api/user/tasks/${taskId}`, taskData);\n    return response.data;\n  },\n  getProfile: async () => {\n    const response = await api.get('/api/user/profile');\n    return response.data;\n  }\n};\n\n/* ================================\r\n   EXPORT DEFAULT\r\n================================ */\n\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","authAPI","register","name","email","password","role","response","post","data","login","formData","URLSearchParams","append","adminAPI","getTasks","get","createTask","taskData","updateTask","taskId","put","deleteTask","delete","getAnalytics","getUsers","userAPI","getProfile"],"sources":["C:/project_new/frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { Task, User, Analytics } from '../types';\r\n\r\n/* ================================\r\n   BASE CONFIG\r\n================================ */\r\n\r\nconst API_BASE_URL = 'http://127.0.0.1:8080';\r\n\r\n/**\r\n * Axios instance for JSON-based APIs\r\n */\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n/* ================================\r\n   JWT INTERCEPTOR\r\n================================ */\r\n\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n/* ================================\r\n   AUTH API\r\n================================ */\r\n\r\nexport const authAPI = {\r\n  /**\r\n   * Register user (JSON)\r\n   */\r\n  register: async (\r\n    name: string,\r\n    email: string,\r\n    password: string,\r\n    role: string = 'user'\r\n  ) => {\r\n    const response = await api.post('/api/auth/register', {\r\n      name,\r\n      email,\r\n      password,\r\n      role,\r\n    });\r\n\r\n    return response.data;\r\n  },\r\n\r\n  /**\r\n   * Login user (OAuth2 form-data)\r\n   * IMPORTANT: FastAPI expects `username`, not `email`\r\n   */\r\n  login: async (email: string, password: string) => {\r\n    const formData = new URLSearchParams();\r\n    formData.append('username', email);\r\n    formData.append('password', password);\r\n\r\n    const response = await axios.post(\r\n      `${API_BASE_URL}/api/auth/login`,\r\n      formData,\r\n      {\r\n        headers: {\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n        },\r\n      }\r\n    );\r\n\r\n    return response.data;\r\n  },\r\n};\r\n\r\n/* ================================\r\n   ADMIN API\r\n================================ */\r\n\r\nexport const adminAPI = {\r\n  getTasks: async (): Promise<Task[]> => {\r\n    const response = await api.get('/api/admin/tasks');\r\n    return response.data;\r\n  },\r\n\r\n  createTask: async (taskData: Partial<Task>): Promise<Task> => {\r\n    const response = await api.post('/api/admin/tasks', taskData);\r\n    return response.data;\r\n  },\r\n\r\n  updateTask: async (\r\n    taskId: number,\r\n    taskData: Partial<Task>\r\n  ): Promise<Task> => {\r\n    const response = await api.put(`/api/admin/tasks/${taskId}`, taskData);\r\n    return response.data;\r\n  },\r\n\r\n  deleteTask: async (taskId: number): Promise<void> => {\r\n    await api.delete(`/api/admin/tasks/${taskId}`);\r\n  },\r\n\r\n  getAnalytics: async (): Promise<Analytics> => {\r\n    const response = await api.get('/api/admin/analytics');\r\n    return response.data;\r\n  },\r\n\r\n  getUsers: async (): Promise<User[]> => {\r\n    const response = await api.get('/api/admin/users');\r\n    return response.data;\r\n  },\r\n};\r\n\r\n/* ================================\r\n   USER API\r\n================================ */\r\n\r\nexport const userAPI = {\r\n  getTasks: async (): Promise<Task[]> => {\r\n    const response = await api.get('/api/user/tasks');\r\n    return response.data;\r\n  },\r\n\r\n  updateTask: async (\r\n    taskId: number,\r\n    taskData: Partial<Task>\r\n  ): Promise<Task> => {\r\n    const response = await api.put(`/api/user/tasks/${taskId}`, taskData);\r\n    return response.data;\r\n  },\r\n\r\n  getProfile: async (): Promise<User> => {\r\n    const response = await api.get('/api/user/profile');\r\n    return response.data;\r\n  },\r\n};\r\n\r\n/* ================================\r\n   EXPORT DEFAULT\r\n================================ */\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}